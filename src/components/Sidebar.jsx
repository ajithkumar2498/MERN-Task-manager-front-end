import React from 'react'
import {
    MdDashboard,
    MdOutlineAddTask,
    MdOutlinePendingActions,
    MdSettings,
    MdTaskAlt,
  } from "react-icons/md";
  import { FaTasks, FaTrashAlt, FaUsers } from "react-icons/fa";
import { useDispatch, useSelector } from 'react-redux';
import { Link, NavLink, useLocation } from 'react-router-dom';
import { setOpenSidebar } from '../redux/slices/authSlice';
import clsx from 'clsx';


const linkData = [
    {
      label: "Dashboard",
      link: "dashboard",
      icon: <MdDashboard />,
    },
    {
      label: "Tasks",
      link: "tasks",
      icon: <FaTasks />,
    },
    {
      label: "Completed",
      link: "completed/completed",
      icon: <MdTaskAlt />,
    },
    {
      label: "In Progress",
      link: "in-progress/in progress",
      icon: <MdOutlinePendingActions />,
    },
    {
      label: "To Do",
      link: "todo/todo",
      icon: <MdOutlinePendingActions />,
    },
    {
      label: "Team",
      link: "team",
      icon: <FaUsers />,
    },
    {
      label: "Trash",
      link: "trashed",
      icon: <FaTrashAlt />,
    },
  ];

const Sidebar = () => {
    const {user} =useSelector((state)=> state.auth)

    const dispatch = useDispatch()
    const location = useLocation()

    const path = location.pathname.split("/")[1]

    const sidebarlinks = user?.isAdmin ? linkData : linkData.slice(0, 5)

    const closeSidebar = ()=>{
        dispatch(setOpenSidebar(false))
    }

    const NavLink = ({el})=>{
        return (
            <Link to={el.link}
              onClick={closeSidebar}
              className={clsx(
                "w-full lg:w-3/4 flex gap-2 px-3 py-2 rounded-full items-center text-gray-800 text-base hover:bg-[#2564ed2d]", 
                path === el.link.split("/")[0] ? "bg-blue-700 text-white" : "" )}
            >
            {el.icon}
            <span className='hover:text-[#2564ed]'>{el.label}</span>
            </Link>
        )
    }
  return <>
     <div className="w-full h-full flex flex-col gap-6 p-5">
        <h1 className='flex gap-1 items-center'>
            <p className='rounded-full'>
              <svg xmlns="http://www.w3.org/2000/svg" className='h-12 w-12'xmlns:xlink="http://www.w3.org/1999/xlink" width="500" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="500" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="a83a998efd"><path d="M 39.757812 49.175781 L 305 49.175781 L 305 314 L 39.757812 314 Z M 39.757812 49.175781 " clip-rule="nonzero"/></clipPath><clipPath id="0699509f3b"><path d="M 213 204 L 335.257812 204 L 335.257812 325.925781 L 213 325.925781 Z M 213 204 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#a83a998efd)"><path fill="#004aad" d="M 225.992188 301.945312 C 209.554688 309.382812 191.214844 313.363281 172.011719 313.363281 C 99 313.363281 39.832031 254.367188 39.832031 181.355469 C 39.832031 108.34375 99 49.175781 172.011719 49.175781 C 244.847656 49.175781 304.019531 108.34375 304.019531 181.355469 C 304.019531 191.21875 302.980469 200.90625 300.902344 210.074219 Z M 225.992188 301.945312 " fill-opacity="1" fill-rule="evenodd"/></g><path fill="#ffffff" d="M 101.078125 202.117188 C 92.078125 192.082031 99.347656 176.164062 112.667969 176.164062 C 116.820312 176.164062 120.800781 177.722656 123.742188 180.664062 L 142.078125 199.003906 C 162.496094 166.304688 188.964844 137.238281 225.644531 123.742188 C 238.792969 118.898438 251.078125 132.394531 245.195312 145.023438 C 243.636719 148.65625 240.523438 151.597656 236.542969 153.15625 C 201.941406 165.785156 176.507812 199.175781 159.207031 231.355469 C 154.019531 241.21875 141.5625 242.601562 134.121094 235.335938 Z M 101.078125 202.117188 " fill-opacity="1" fill-rule="evenodd"/><g clip-path="url(#0699509f3b)"><path fill="#5271ff" d="M 335.160156 264.921875 C 335.160156 266.914062 335.0625 268.90625 334.867188 270.890625 C 334.671875 272.875 334.378906 274.84375 333.988281 276.800781 C 333.601562 278.757812 333.117188 280.691406 332.539062 282.597656 C 331.957031 284.507812 331.289062 286.382812 330.523438 288.226562 C 329.761719 290.070312 328.910156 291.871094 327.96875 293.628906 C 327.027344 295.386719 326.003906 297.097656 324.898438 298.753906 C 323.789062 300.414062 322.601562 302.011719 321.335938 303.554688 C 320.070312 305.097656 318.734375 306.574219 317.324219 307.984375 C 315.914062 309.394531 314.4375 310.730469 312.894531 311.996094 C 311.351562 313.261719 309.753906 314.449219 308.09375 315.558594 C 306.4375 316.664062 304.726562 317.6875 302.96875 318.628906 C 301.210938 319.570312 299.410156 320.421875 297.566406 321.183594 C 295.722656 321.949219 293.847656 322.617188 291.9375 323.199219 C 290.03125 323.777344 288.097656 324.261719 286.140625 324.648438 C 284.183594 325.039062 282.214844 325.332031 280.230469 325.527344 C 278.246094 325.722656 276.253906 325.820312 274.261719 325.820312 C 272.265625 325.820312 270.277344 325.722656 268.292969 325.527344 C 266.304688 325.332031 264.335938 325.039062 262.378906 324.648438 C 260.421875 324.261719 258.492188 323.777344 256.582031 323.199219 C 254.671875 322.617188 252.796875 321.949219 250.953125 321.183594 C 249.113281 320.421875 247.3125 319.570312 245.550781 318.628906 C 243.792969 317.6875 242.085938 316.664062 240.425781 315.558594 C 238.769531 314.449219 237.167969 313.261719 235.625 311.996094 C 234.085938 310.730469 232.609375 309.394531 231.199219 307.984375 C 229.789062 306.574219 228.449219 305.097656 227.183594 303.554688 C 225.917969 302.011719 224.730469 300.414062 223.625 298.753906 C 222.515625 297.097656 221.492188 295.386719 220.550781 293.628906 C 219.609375 291.871094 218.757812 290.070312 217.996094 288.226562 C 217.234375 286.382812 216.5625 284.507812 215.984375 282.597656 C 215.402344 280.691406 214.917969 278.757812 214.53125 276.800781 C 214.140625 274.84375 213.847656 272.875 213.652344 270.890625 C 213.457031 268.90625 213.359375 266.914062 213.359375 264.921875 C 213.359375 262.925781 213.457031 260.9375 213.652344 258.949219 C 213.847656 256.964844 214.140625 254.996094 214.53125 253.039062 C 214.917969 251.082031 215.402344 249.152344 215.984375 247.242188 C 216.5625 245.332031 217.234375 243.457031 217.996094 241.613281 C 218.757812 239.773438 219.609375 237.972656 220.550781 236.210938 C 221.492188 234.453125 222.515625 232.746094 223.625 231.085938 C 224.730469 229.429688 225.917969 227.828125 227.183594 226.285156 C 228.449219 224.742188 229.789062 223.269531 231.199219 221.859375 C 232.609375 220.449219 234.085938 219.109375 235.625 217.84375 C 237.167969 216.578125 238.769531 215.390625 240.425781 214.285156 C 242.085938 213.175781 243.792969 212.152344 245.550781 211.210938 C 247.3125 210.269531 249.113281 209.417969 250.953125 208.65625 C 252.796875 207.894531 254.671875 207.222656 256.582031 206.644531 C 258.492188 206.0625 260.421875 205.578125 262.378906 205.191406 C 264.335938 204.800781 266.304688 204.507812 268.292969 204.3125 C 270.277344 204.117188 272.265625 204.019531 274.261719 204.019531 C 276.253906 204.019531 278.246094 204.117188 280.230469 204.3125 C 282.214844 204.507812 284.183594 204.800781 286.140625 205.191406 C 288.097656 205.578125 290.03125 206.0625 291.9375 206.644531 C 293.847656 207.222656 295.722656 207.894531 297.566406 208.65625 C 299.410156 209.417969 301.210938 210.269531 302.96875 211.210938 C 304.726562 212.152344 306.4375 213.175781 308.09375 214.285156 C 309.753906 215.390625 311.351562 216.578125 312.894531 217.84375 C 314.4375 219.109375 315.914062 220.449219 317.324219 221.859375 C 318.734375 223.269531 320.070312 224.742188 321.335938 226.285156 C 322.601562 227.828125 323.789062 229.429688 324.898438 231.085938 C 326.003906 232.746094 327.027344 234.453125 327.96875 236.210938 C 328.910156 237.972656 329.761719 239.773438 330.523438 241.613281 C 331.289062 243.457031 331.957031 245.332031 332.539062 247.242188 C 333.117188 249.152344 333.601562 251.082031 333.988281 253.039062 C 334.378906 254.996094 334.671875 256.964844 334.867188 258.949219 C 335.0625 260.9375 335.160156 262.925781 335.160156 264.921875 Z M 335.160156 264.921875 " fill-opacity="1" fill-rule="nonzero"/></g><path fill="#ffffff" d="M 264.398438 238.105469 C 264.398438 232.742188 268.898438 228.242188 274.261719 228.242188 C 279.625 228.242188 284.121094 232.742188 284.121094 238.105469 L 284.121094 291.5625 C 284.121094 297.101562 279.625 301.425781 274.261719 301.425781 C 268.898438 301.425781 264.398438 297.101562 264.398438 291.5625 Z M 264.398438 238.105469 " fill-opacity="1" fill-rule="nonzero"/><path fill="#ffffff" d="M 301.078125 255.058594 C 306.441406 255.058594 310.9375 259.382812 310.9375 264.921875 C 310.9375 270.285156 306.441406 274.78125 301.078125 274.78125 L 247.445312 274.78125 C 242.082031 274.78125 237.582031 270.285156 237.582031 264.921875 C 237.582031 259.382812 242.082031 255.058594 247.445312 255.058594 Z M 301.078125 255.058594 " fill-opacity="1" fill-rule="nonzero"/></svg>
            </p>
            <span className='text-2xl font-bold text-black'>Taskify</span>
        </h1>
        
        <div className="flex-1 flex flex-col gap-y-5 py-8">
            {
                sidebarlinks.map((link)=>(
                    <NavLink el={link} key={link.label}/>
                ))
            }
        </div>

        <div className="">
          <button className="w-full flex gap-2 p-2 items-center text-lg text-gray-800">
            <MdSettings/>
            <span>Settings</span>
          </button>
        </div>

     </div>
  </>
}

export default Sidebar